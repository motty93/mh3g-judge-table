# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

**重要**: このプロジェクトでは日本語でのコミュニケーションを基本とします。Claude Codeとのやり取りも日本語で行ってください。

## プロジェクト概要

モンスターハンター3G（MH3G）の砂原採取クエストの報酬パターンから、現在の乱数テーブル（T1〜T17）を判定するウェブアプリケーションです。

## 開発環境

ビルドプロセスは不要な静的ウェブアプリケーションです。`index.html`をブラウザで開くか、任意の静的ウェブサーバーで配信してください。

## アーキテクチャ

### フロントエンド構造
- `index.html`に全てのUIとロジックを含む**シングルページアプリケーション**
- **Alpine.js**でリアクティブコンポーネントを実装（x-data、x-model、x-showディレクティブ）
- **Pico CSS v2**フレームワークでスタイリング
- 全ての依存関係はCDNから読み込み - パッケージマネージャー不要

### 判定ロジックのフロー
1. ユーザーが3回分の砂原採取クエストの報酬を入力
2. 入力された報酬パターンを`table-seed.csv`の事前計算済み乱数列と照合
3. スキル補正（幸運/激運）を考慮してパターンマッチング
4. 報酬確率の閾値に基づいて一致する乱数テーブルを返す

### データファイル（dataディレクトリ）
- `table-seed.csv`: 事前計算済み乱数シード値（5400行以上、T1-T17の17列）- `judge-table.xls`のSheet2に対応
- `table-judgement.csv`: 報酬確率設定（アイテムドロップ閾値を定義する100行）- `judge-table.xls`のSheet1に対応
- `macro.md`: 元となるVBAマクロのコード

### 実装の詳細
- 乱数消費: クエスト1回につき32個の値を消費
- 報酬確率:
  - 釣りミミズ: 50%（値0-49）
  - 生肉: 25%（値50-74）
  - 砥石: 25%（値75-99）
- スキル効果により「スカ」になる確率が変動（幸運・激運により閾値が変化）

## よくあるタスク

### 変更のテスト
`index.html`をブラウザで開いてパターンマッチングをテスト：
1. 3回分のクエストセクションにサンプル報酬データを入力
2. 「判定実行」をクリックして解析を実行
3. 結果セクションに結果が表示されることを確認

### 乱数ロジックの修正
コアのパターンマッチングアルゴリズムは`index.html`内のインラインJavaScriptにあります。Alpine.jsコンポーネント定義とjudge()メソッドを参照してください。

### データファイルの更新
CSVファイルを修正する場合は、JavaScriptのパース処理が特定の列構造を期待しているため、現在のフォーマットを維持してください。
